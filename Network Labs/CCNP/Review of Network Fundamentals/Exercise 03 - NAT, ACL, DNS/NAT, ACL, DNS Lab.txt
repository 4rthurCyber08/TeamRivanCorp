Exercise 03
NAT, ACL, DNS Lab

For Accessing Devices

 Device 	Port
 P1		2186
 P2 	 	2187
 P3 	 	2188
 P4 	 	2189
 R1 	 	2190
 R2 	 	2191
 R3 		2192
 R4 		2193
 I1 		2194

 
TASKS

Do not remove any BGP configurations

1. Configure NAT on R1, R2, R3, and R4 to allow PCs to ping the loopback IP of I1
	- Configure an ACL named site3nat that permits only all Class B IPv4 address to the internet.
	- Configure NAT on R1 using a NAT pool name site1nat
	- Configure NAT on R2 with an ACL that allows only 

2. Configure I1 as a DNS server
	- Set R1's public IP as siteA.com
	- Set R2's public IP as siteB.com
	- Set R3's public IP as siteC.com
	- Set R4's public IP as siteD.com

3. Configure All routers and PCs to have I1 as their DNS Server

4. Configure an ACL on R3 to block the following
	- HTTP from R2
	- ICMP from R1
	- Telnet from R4
	- Finger from R1
	- Daytime from R2
	- NTP from R1
	- DNS from R4

5. Configure an account on P2 and allow all remote connections

6. Configure Port forwarding on R2 that will allow telnet connections to be forwarded to P2.

7. Configure a Standard ACL on R3 to deny remote connections.
	- Do not use the transport input command to achieve this.

8. TShoot the ACL on R1


SOLUTION

1. Configure NAT on R1, R2, R3, and R4 to allow PCs to ping the loopback IP of I1
	- Configure an ACL named site3nat that permits only all Class B IPv4 address to the internet.
	- Configure NAT on R1 using a NAT pool name site1nat
	- Configure NAT on R2 with an ACL that allows only 



2. Configure I1 as a DNS server
	- Set R1's public IP as siteA.com
	- Set R2's public IP as siteB.com
	- Set R3's public IP as siteC.com
	- Set R4's public IP as siteD.com

3. Configure All routers and PCs to have I1 as their DNS Server

4. Configure an ACL on R3 to block the following
	- HTTP from R2
	- ICMP from R1
	- Telnet from R4
	- Finger from R1
	- Daytime from R2
	- NTP from R1
	- DNS from R4

5. Configure an account on P2 and allow all remote connections

6. Configure Port forwarding on R2 that will allow telnet connections to be forwarded to P2.

7. Configure a Standard ACL on R3 to deny remote connections.
	- Do not use the transport input command to achieve this.

8. TShoot the ACL on R1
###########

PRECONFIGURATIONS

Name: Exercise 03
Desc: NAT, ACL, DNS Lab

***

Netmap:

P1    186
P2    187
P3    188
P4    189
R1    190
R2    191
R3    192
R4    193
I1    194

194:0/0 190:0/0
194:0/1 191:0/0
194:0/2 192:0/1
194:0/3 193:0/1

190:0/1 186:0/0
191:0/1 187:0/0
192:0/0 188:0/0
193:0/0 189:0/0

***

Preconfigs

@all device
conf t
 no logging cons
 line cons 0
  exec-timeout 0 0
 line vty 0 4
  exec-timeout 0 0
  end
wr

@P1
conf t
 hostname P1
 int e0/0
  ip add 10.1.2.13 255.255.255.252 
  no shut
  end

@P2
conf t
 hostname P2
 int e0/0
  ip add 192.168.230.3 255.255.240.0
  no shut
  end

@P3
conf t
 hostname P3
 int e0/0
  ip add 172.16.45.78 255.255.255.192
  no shut
  end

@P4
conf t
 hostname P4
 int e0/0
  ip add 10.4.8.86 255.255.255.240
  no shut
  end

@R1
conf t
 hostname R1
 int e0/1
  ip add 10.1.2.14 255.255.255.252
  no shut
 int e0/0
  ip add 4.213.11.254 255.255.255.128
  no shut
 router bgp 1
  bgp log-neighbor-changes
  neighbor 4.213.11.129 remote-as 1111
  address-family ipv4
  neighbor 4.213.11.129 activate
  network 4.213.11.128 mask 255.255.255.128
  end

@R2
conf t
 hostname R2
 int e0/1
  ip add 172.16.45.77 255.255.255.252
  no shut
 int e0/0
  ip add 19.211.163.62 255.255.255.224
  no shut
 router bgp 2
  bgp log-neighbor-changes
  neighbor 19.211.163.33 remote-as 1111
  address-family ipv4
   neighbor 19.211.163.33 activate
   network 19.211.163.32 mask 255.255.255.224
  end

@R3
conf t
 hostname R3
 int e0/0
  ip add 192.168.230.3 255.255.240.0
  no shut
 int e0/1
  ip add 72.6.12.22 255.255.255.252
  no shut
 router bgp 3
  bgp log-neighbor-changes
  neighbor 72.6.12.21 remote-as 1111
  address-family ipv4
   neighbor 72.6.12.21 activate
   network 72.6.12.20 mask 255.255.255.252
   end

@R4
conf t
 hostname R4
 int e0/0
  ip add 10.4.8.85 255.255.255.240
  no shut
 int e0/1
  ip add 107.22.47.54 255.255.255.252
  no shut
 router bgp 4
  bgp log-neighbor-changes
  neighbor 107.22.47.53 remote-as 1111
  address-family ipv4
   neighbor 107.22.47.53 activate
   network 107.22.47.52 mask 255.255.255.252
  end

@I1
conf t
 hostname I1
 int lo0
  ip add 8.8.8.8 255.255.255.255
 int e0/0
  ip add 4.213.11.129 255.255.255.128
  no shut
 int e0/1
  ip add 19.211.163.33 255.255.255.224
  no shut
 int e0/2
  ip add 72.6.12.21 255.255.255.252
  no shut
 int e0/3
  ip add 107.22.47.53 255.255.255.252
  no shut
 router bgp 1111
  bgp log-neighbor-changes
  neighbor 107.22.47.54 remote-as 4
  neighbor 72.6.12.22 remote-as 3
  neighbor 19.211.163.62 remote-as 2
  neighbor 4.213.11.254 remote-as 1
  address-family ipv4
   neighbor 107.22.47.54 activate
   neighbor 72.6.12.22 activate
   neighbor 19.211.163.62 activate
   neighbor 4.213.11.254 activate
   network 8.8.8.8 mask 255.255.255.255
   network 107.22.47.52 mask 255.255.255.252
   network 72.6.12.20 mask 255.255.255.252
   network 19.211.163.32 mask 255.255.255.224
   network 4.213.11.128 mask 255.255.255.128
  end
wr
